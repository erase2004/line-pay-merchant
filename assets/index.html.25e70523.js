import{r as t,o as r,c as l,a as n,b as a,w as c,F as i,d as p,e as s}from"./app.a5cc4239.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const k={},d=p('<h1 id="line-pay-merchant" tabindex="-1"><a class="header-anchor" href="#line-pay-merchant" aria-hidden="true">#</a> line-pay-merchant</h1><p><img src="https://img.shields.io/npm/l/line-pay-merchant" alt="NPM"><img src="https://img.shields.io/github/workflow/status/enylin/line-pay-merchant/ci/main" alt="GitHub Workflow Status (branch)"><img src="https://codecov.io/gh/enylin/line-pay-merchant/branch/main/graph/badge.svg" alt="codecov"><img src="https://img.shields.io/github/languages/code-size/enylin/line-pay-merchant" alt="GitHub code size in bytes"><img src="https://img.shields.io/npm/dt/line-pay-merchant" alt="npm"><img src="https://img.shields.io/npm/v/line-pay-merchant" alt="npm"></p><p>LINE Pay V3 Online APIs library for Node.js</p><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2>',4),b=s("LINE Pay Merchant is a JavaScript library for integrating LINE Pay Online APIs. The goal of this library is to help developers build reliable "),h={href:"https://pay.line.me",target:"_blank",rel:"noopener noreferrer"},m=s("LINE Pay"),y=s(" applications. It handles tedious jobs to help developers focus on business logic and ideas that produce value."),g=s("This library implements HTTP API calls and generates authentication headers automatically; provides "),_={href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"},f=s("TypeScript"),q=s(" type definitions of LINE Pay API requests and responses, which can be helpful in finding errors at compile time; and provides built-in handlers to deal with exceptions, including API timeouts and duplicate transaction requests. For added flexibility, users can define custom request/response handlers."),v=n("h2",{id:"features",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#features","aria-hidden":"true"},"#"),s(" Features")],-1),w=n("li",null,"Auto-generated LINE Pay API V3 authentication header",-1),I=n("li",null,[s("Built-in API request and response "),n("a",{href:"./guide/handlers"},"handler")],-1),P=n("li",null,[s("Fully customizable API request and response "),n("a",{href:"./guide/handlers"},"handler")],-1),x={href:"http://typescript.net/",target:"_blank",rel:"noopener noreferrer"},L=s("TypeScript"),N=s(" support"),S=s("Handles transaction ID parsing (see "),U=s("Transaction ID"),B=s(")"),E=n("h2",{id:"installation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#installation","aria-hidden":"true"},"#"),s(" Installation")],-1),G=s("You can install the package from "),T={href:"https://www.npmjs.com/package/line-pay-merchant",target:"_blank",rel:"noopener noreferrer"},V=s("NPM"),A=s(" with the following command:"),C=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> line-pay-merchant
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start" aria-hidden="true">#</a> Quick Start</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createLinePayClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;line-pay-merchant&#39;</span>

<span class="token keyword">const</span> linePayClient <span class="token operator">=</span> <span class="token function">createLinePayClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">channelId</span><span class="token operator">:</span> <span class="token string">&#39;1479113123&#39;</span><span class="token punctuation">,</span> <span class="token comment">// channel ID</span>
  <span class="token literal-property property">channelSecretKey</span><span class="token operator">:</span> <span class="token string">&#39;1f021e50f28fb3f40b7a9c5e758b0a19&#39;</span><span class="token punctuation">,</span> <span class="token comment">// channel secret key</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span> <span class="token comment">// env can be &#39;development&#39; or &#39;production&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> linePayClient<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
        <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">&#39;TWD&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">orderId</span><span class="token operator">:</span> <span class="token string">&#39;20211216003&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">packages</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;c99abc79-3b29-4f40-8851-bc618ca57856&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Product Name&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">500</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirectUrls</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">confirmUrl</span><span class="token operator">:</span> <span class="token string">&#39;https://myshop.com/confirmUrl&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cancelUrl</span><span class="token operator">:</span> <span class="token string">&#39;https://myshop.com/cancelUrl&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>Response:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;returnCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;returnMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Success.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;paymentUrl&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;web&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://sandbox-web-pay.line.me/web/payment/wait?transactionReserveId=eVBISG5rQ09QL2JBVmJsdGdGN3RiUlBLaU0vMUtKWGEvVzhZS3o5NnBvSUlqZXdLdXk3Wlh0RXY2a0o3ZHp6Yw&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;app&quot;</span><span class="token operator">:</span> <span class="token string">&quot;line://pay/payment/eVBISG5rQ09QL2JBVmJsdGdGN3RiUlBLaU0vMUtKWGEvVzhZS3o5NnBvSUlqZXdLdXk3Wlh0RXY2a0o3ZHp6Yw&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;transactionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021121600698709710&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;paymentAccessToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;656097936065&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;comments&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="changelog" tabindex="-1"><a class="header-anchor" href="#changelog" aria-hidden="true">#</a> Changelog</h2>`,6),j=s("Please visit "),R={href:"https://github.com/enylin/line-pay-merchant/blob/main/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"},M=s("Changelog"),H=s("."),W=n("h2",{id:"license",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#license","aria-hidden":"true"},"#"),s(" License")],-1),X={href:"https://opensource.org/licenses/MIT",target:"_blank",rel:"noopener noreferrer"},Z=s("MIT"),z=n("p",null,"Copyright (c) 2020-present, Sean Lin",-1);function F(J,Q){const e=t("ExternalLinkIcon"),o=t("RouterLink");return r(),l(i,null,[d,n("p",null,[b,n("a",h,[m,a(e)]),y]),n("p",null,[g,n("a",_,[f,a(e)]),q]),v,n("ul",null,[w,I,P,n("li",null,[n("a",x,[L,a(e)]),N]),n("li",null,[S,a(o,{to:"/guide/further-details.html#transaction-id"},{default:c(()=>[U]),_:1}),B])]),E,n("p",null,[G,n("a",T,[V,a(e)]),A]),C,n("p",null,[j,n("a",R,[M,a(e)]),H]),W,n("p",null,[n("a",X,[Z,a(e)])]),z],64)}var K=u(k,[["render",F]]);export{K as default};
